"use strict";var userID=1265;function jsonToUrlParams(urlObj){var urlParamsString="";return Object.keys(urlObj).reduce(function(obj,key){urlParamsString+=key+"="+urlObj[key]+"&"},{}),urlParamsString}function numToSimple(number){return 1e4<number?(number/1e4).toFixed(1)+"w":number}$.ajax({url:"/api/list/tao/product",type:"GET",dataType:"json",data:{userId:1265,pageSize:1,sort:!0,type:"new_activity",random:Math.random()},success:function(data){var loadingMask=document.getElementById("loadingDiv");loadingMask.parentNode.removeChild(loadingMask);var main=document.getElementById("main");main.style.opacity="100",main.style.filter="alpha(opacity=100)";var res=data.data,goodsType=["./img/type_taobaol_icon.png","./img/type_tmall_icon.png"];res.map(function(item,index){var itemPrice=item.itemPrice,coupon=item.coupon,commission=item.commission,itemUrl=item.itemUrl,nativeUrl=item.nativeUrl,itemId=item.itemId,name=item.name,tmall=item.tmall,sales=item.sales,itemPicUrl=item.itemPicUrl,strParams=jsonToUrlParams({userId:userID,itemId:itemId,coupon:coupon,commission:commission,itemUrl:itemUrl,tmall:tmall,nativeUrl:nativeUrl});$("#goods").append('<a href="http://www.miaokun520.com/rebatecr/goodsInfo.html?'+strParams+'">\n\t\t\t\t\t<dl class="goods-item">\n\t\t\t\t\t\t<dt><img class="lazy" src="'+itemPicUrl+'"/></dt>\n\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t<div class="title" style="background-image:url('+goodsType[tmall]+')">'+name+'</div>\t\n\t\t\t\t\t\t\t<div class="dd2">\n\t\t\t\t\t\t\t\t<div class="coupon">'+coupon+'元券</div>\n\t\t\t\t\t\t\t\t<div class="rebate">购买后返'+commission+'元</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="dd3">\n\t\t\t\t\t\t\t\t<div class="dd3-wrap">\n\t\t\t\t\t\t\t\t\t<div class="price">￥'+(itemPrice-coupon).toFixed(2)+'元</div>\n\t\t\t\t\t\t\t\t\t<div class="itemPrice"><delete>￥'+itemPrice+'</delete></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class="sales">已售'+numToSimple(sales)+"</div>\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</dd>\n\t\t\t\t\t</dl>\t\t\t\t\n\t\t\t\t</a>")})},error:function(err){console.log(err)}});